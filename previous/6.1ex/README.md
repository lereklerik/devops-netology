# Домашнее задание к занятию "6.1. Типы и структура СУБД"

<details>
<summary>*UPD комментарий преподавателя*</summary>
Добрый день, Валерия.
Спасибо за выполненную работу.
Вы хорошо справились с заданиями, насколько комментариев:
Генеалогическое дерево хранить в иерархической СУБД не получится, так как у дочернего элемента может быть только один родитель. В данном случае подойдет сетевая СУБД, где у дочернего элемента может быть более одного родителя.
Для интернет магазина графовые СУБД будут избыточны, их можно использовать в логистике для связки склады-транспорт-маршруты. Если бы говорили про маркетплейсы, то да, здесь так же можно подумать о графовых СУБД, а так достаточно использовать реляционные системы, к примеру MySQL на NDB движке.
Данные записываются на все узлы с задержкой до часа (асинхронная запись)
При асинхронной записи данные не могут быть согласованными, так как в один момент времени на двух кластерах будет совершенно разная информация.
Будут вопросы - пишите в слаке.
Успехов в дальнейшем обучении!
</details>



## Задача 1
    Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных. 
    Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:    
        -   Электронные чеки в json виде
        -   Склады и автомобильные дороги для логистической компании
        -   Генеалогические деревья
        -   Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
        -   Отношения клиент-покупка для интернет-магазина
    Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

| Сущность                                                                           | Тип БД                      | Примечание    |
|:----------------------------------------------------------------------------------:|:---------------------------:|:-------------:|
|Электронные чеки в json виде                                                        |Документо-ориентированная БД | Основной тип сущности - документ. В нашем варианте им является электронный чек. Он может быть связан с другими документами по мета-полям или по ключу |
|Склады и автомобильные дороги для логистической компании                            |Реляционная БД/Сетевая БД    | По лекции больше подходит Сетевая БД, как структура, организующая взаимосвязи между объектами. Отношения могут быть M:M. Однако, работаю с РЖД, и данные хранятся в реляционной БД. Учитывая большое количество интеграций с другими системами, я не могу исключить взаимодействие одной БД с другой посредством различных автоматизированных систем в транспортной компании |
|Генеалогические деревья                                                             |Иерархическая БД             | Идеальный пример древовидной структуры хранения данных, где каждый узел дерева связан с другим через отношение родитель-потомок |
|Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации  |Key-value БД                 | Также идеальный пример представления сложного составного хэш-ключа кэша с идентификатором клиента |
|Отношения клиент-покупка для интернет-магазина                                      |Графовая БД                  | Учитывая сложность построения сетей в современных интернет-магазинах (с их предложениями товаров к изучаемому объекту), предполагаю, что узлы могут быть Пользователями/Продуктами, а ребра - связи между покупателями/продуктами, которые могут быть каким-то образом взаимосвязаны с выбором покупателя |



## Задача 2

        Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. 
        Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):
            1. Данные записываются на все узлы с задержкой до часа (асинхронная запись)
            2. При сетевых сбоях, система может разделиться на 2 раздельных кластера
            3. Система может не прислать корректный ответ или сбросить соединение
        А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

| Реализация                                                              | Классификация по CAP  | Классификация по PACELC  |
|:-----------------------------------------------------------------------:|:---------------------:|:------------------------:|
|Данные записываются на все узлы с задержкой до часа (асинхронная запись) | CA                    | P+A   E+C  |
|При сетевых сбоях, система может разделиться на 2 раздельных кластера    | AP                    | P+A   E+L  |
|Система может не прислать корректный ответ или сбросить соединение       | CP                    | P+C   E+L  |

## Задача 3

    Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

* Принцип ACID требует обеспечения надежности и предсказуемости работы СУБД
* Принцип BASE противосопоставлен принципу ACID, т.к. может исключить согласованность данных, допускает неустойчивое состояние БД.

_Принципы взаимоисключающие, значит они не могут сочетаться в одной СУБД._

## Задача 4

    Вам дали задачу написать системное решение, основой которого бы послужили:
        -   фиксация некоторых значений с временем жизни
        -   реакция на истечение таймаута
    Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

* Redis

* Основные недостатки:
  * Проседание ресурсов, если за ними не следить. Насколько могу судить по статьям о `redis`, основная проблема с ним в том, что он достаточно ресурсозатратный. Нужно следить за памятью 
  * Redis не поддерживает автоматическую отказоустойчивость и восстановление, таким образом, при возникновении проблем с хостом может возникнуть несогласованность данных
  